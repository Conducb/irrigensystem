<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>IRRIGEN App</title>
<style>
body{background:#e8f5e9;font-family:Arial;color:#1b5e20;text-align:center;}
.card{max-width:400px;margin:40px auto;padding:20px;border-radius:20px;box-shadow:0 0 10px #999;}
h2{color:#2e7d32;}
</style>
</head>
<body>
<div class="card" id="panel">Cargando datos...</div>

<script>
async function actualizar(){
  const url="https://api.thingspeak.com/channels/3121036/feeds.json?results=1&api_key=F0V70T5DVGC9A7DD";
  const r=await fetch(url); const d=await r.json(); const x=d.feeds[0];
  const T=Number(x.field1).toFixed(1);
  const H=Number(x.field2).toFixed(1);
  const Hs=Number(x.field3).toFixed(1);
  const L=x.field4=="1"?"ğŸŒ§ Llueve":"â˜€ï¸ Seco";
  const N=Number(x.field5).toFixed(1);
  const R=x.field6=="1"?"ğŸ’§ Regando...":"ğŸŒ¿ En reposo";
  const suelo=Hs<40?"ğŸŒ¾ Seco":"ğŸ’š HÃºmedo";
  const tanque=N<30?"âš ï¸ Bajo":"ğŸŸ¦ Lleno";
  document.getElementById("panel").innerHTML=`
    <h2>ğŸŒ¿ SISTEMA IRRIGEN ğŸŒ¿</h2>
    <p><b>ğŸŒ¡ Temperatura:</b> ${T} Â°C</p>
    <p><b>ğŸ’¨ Humedad aire:</b> ${H}%</p>
    <p><b>ğŸŒ± Humedad suelo:</b> ${suelo} (${Hs}%)</p>
    <p><b>â˜ï¸ Clima:</b> ${L}</p>
    <p><b>ğŸª£ Nivel tanque:</b> ${tanque} (${N}%)</p>
    <p><b>ğŸª´ Estado:</b> ${R}</p>`;
}
actualizar();
setInterval(actualizar,15000);
</script>
</body>
</html>
